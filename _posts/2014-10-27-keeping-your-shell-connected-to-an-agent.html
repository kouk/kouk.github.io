---
title: keeping your shell connected to an agent
date: 2014-10-27 07:58:42.000000000 +02:00
categories:
- programming
- tech
tags:
- code
- gnupg
- gpg-agent
- shell
- ssh
status: publish
type: post
published: true
meta:
  publicize_twitter_url: http://t.co/ZtnbsNZnKl
  _rest_api_client_id: "-1"
  _rest_api_published: '1'
  _wpas_skip_path: '1'
  _wpas_skip_tumblr: '1'
  _wpas_skip_linkedin: '1'
  _wpas_skip_google_plus: '1'
  _wpas_skip_facebook: '1'
  publicize_twitter_user: koukopoulos
  _wpas_done_14391: '1'
  _publicize_done_external: a:1:{s:7:"twitter";a:1:{i:13858422;b:1;}}
author:
  login: kouk
  email: koukopoulos@gmail.com
  display_name: Konstantinos Koukopoulos
  first_name: ''
  last_name: ''
excerpt: !ruby/object:Hpricot::Doc
  options: {}
---
<p>One of the most annoying things about using an <a href="http://en.wikipedia.org/wiki/Ssh-agent">ssh-agent </a>type process is making sure that the environment in your shell (either from an <code>xterm</code>, from an ssh session or embedded in another application) is always properly setup to connect to that process. Since I use <a href="https://www.gnupg.org/documentation/manuals/gnupg/index.html#toc_Invoking-GPG_002dAGENT">gnupg's gpg-agent</a>, I wrote the following shell script (sourced in my <code>~/.shrc</code>) to try and always do the right thing&amp;trade;:</p>
<p>{% gist kouk/0523b996b73563dbd487 %}</p>
